---
debug_local:
  hosts:
    localhost:
      ansible_connection: local
      ansible_user: test
      ansible_become_password: test

debug_remote:
  hosts:
    192.168.0.100:
      ansible_connection: ssh
      ansible_user: test
      ansible_become_password: "test"

prelude:
  hosts:
    live:
      ansible_connection: local

catalyst:
  hosts:
    container:
      ansible_connection: nspawn
      ansible_nspawn_root: "{{ machine.mount }}"
      ansible_nspawn_args: >-
        --quiet
        --register=no
        --as-pid2 --pipe
        --hostname={{ machine.hostname }} --machine={{ machine.hostname }}
        --resolv-conf=off --timezone=off --link-journal=no

apex:
  hosts:
    container:
      ansible_connection: nspawn
      ansible_nspawn_user: "{{ users.user.name }}"
      ansible_become_password: "{{ users.user.password }}"
      ansible_nspawn_root: "{{ machine.mount }}"
      ansible_nspawn_args: >-
        --quiet
        --register=no
        --as-pid2 --pipe
        --hostname={{ machine.hostname }} --machine={{ machine.hostname }}
        --resolv-conf=bind-host --timezone=off --link-journal=no
