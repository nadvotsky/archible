---
main:
  hosts:
    main_prelude:
      ansible_connection: local

    main_catalyst:
      ansible_connection: foundation.connection.nspawn
      foundation_nspawn_root: "{{ ba_mount_point }}"
      foundation_nspawn_args: >-
        --quiet --register=no --as-pid2 --pipe
        --hostname={{ ba_hostname }} --machine={{ ba_hostname }}
        --resolv-conf=off --timezone=off --link-journal=no

    main_apex: &main-apex
      ansible_user: "{{ ca_name }}"
      ansible_become_password: "{{ ca_password }}"
      ansible_connection: foundation.connection.nspawn
      foundation_nspawn_root: "{{ ba_mount_point }}"
      foundation_nspawn_args: >-
        --quiet --register=no --as-pid2 --pipe
        --hostname={{ ba_hostname }} --machine={{ ba_hostname }}
        --resolv-conf=bind-host --timezone=off --link-journal=no

    main_extra: *main-apex
