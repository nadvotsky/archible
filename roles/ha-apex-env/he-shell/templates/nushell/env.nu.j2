{%- set _spacing = " " -%}

{%- set _nu = ga_preset | ga_parse_ansi(ga_ansi, mod="light", sep="_") -%}
{%- set _nu_fixes = {
    "light_white": "light_gray",
    "light_black": "dark_gray",
} -%}

{%- macro _nu_icon_render_internal(_icon, _preset) -%}
    {{ _spacing }}(ansi {{ _nu_fixes.get(_preset, _preset) }}){{ _icon }}(ansi reset){{ _spacing }}{{ _spacing }}
{%- endmacro -%}

{%- macro _nu_icon_render(_icon, _preset) -%}
    {{ _nu_icon_render_internal("\\u{%s}" % _icon, _nu.get(_preset, _preset)) }}
{%- endmacro -%}


#
# Nushell Environment Config File
#
# based on the default config from 0.94.2
#

{% if he_shell_prompt is true %}
#
# Starship prompt configuration.
#
if ($env.TERM | str starts-with "xterm") {
    $env.STARSHIP_LOG = "error"
    $env.STARSHIP_CACHE = "/tmp"
    $env.PROMPT_COMMAND = {||
        (
            ^starship prompt
            $"--cmd-duration=($env.CMD_DURATION_MS)"
            $"--status=($env.PROMPT_STATUS)"
        )
    }

    $env.PROMPT_COMMAND_RIGHT = ""
    $env.PROMPT_INDICATOR = ""

    $env.PROMPT_INDICATOR_VI_INSERT = {|| $"{{ _nu_icon_render("f17b5", _nu.sharp.line) }}" }
    $env.PROMPT_INDICATOR_VI_NORMAL = {|| $"{{ _nu_icon_render("f090c", _nu.sharp.line) }}" }
    $env.PROMPT_MULTILINE_INDICATOR = {|| $"{{ _nu_icon_render("ea7c", _nu.sharp.line) }}" }
}


{% endif %}

#
# LS_COLORS theming.
#
$env.LS_COLORS = (^vivid generate nord)


{% if he_shell_gpg is true %}
#
# GnuPG SSH Agent configuration.
#
$env.GPG_TTY = (^tty)
$env.SSH_AUTH_SOCK = (^gpgconf --list-dirs agent-ssh-socket)


{% endif %}
#
# Aliases.
#
alias l = ls -a
alias se = sudoedit
{% if he_shell_fetch is true %}
alias ff = fastfetch
{% endif %}
